socket.on('submit_rework_data', function (data) {

    const batteryType = data.batteryType; 
    const batteryNumber = data.batteryNumber; 
    const status = data.status;  // "reworked"

    console.log("Received:", batteryType, batteryNumber, status);

    // Example:
    // batteryType = "Bajaj 12.2"
    // batteryNumber = "002319"
    // status = "reworked"

    const query = `
        UPDATE taco_treceability.mis_rejection_data 
        SET rework_status = '${status}'
        WHERE battery_pack_name = '${batteryType}'
        AND final_qrcode LIKE '%${batteryNumber}'
    `;

    console.log(query);

    sql.connect(sqlConfig, function (err) {
        if (err) {
            console.log("SQL Connection Error:", err);
            return;
        }

        const request = new sql.Request();

        request.query(query, function (err, recordset) {
            if (err) {
                console.log("SQL Query Error:", err);
            } else {
                console.log("Rework updated successfully.");
            }
        });
    });

});
