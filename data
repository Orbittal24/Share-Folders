<div class="container-fluid">
    <div class="page_header">
        <h1 style="font-size: 3vh; color: green;">HV Rework Screwing Status</h1>

        <!-- ROW 1 -->
        <div class="row" style="margin-top: 20px;">
            <!-- Dropdown 1 -->
            <div class="col-md-3">
                <label>Battery Type</label>
                <select id="batteryType" class="form-control" style="height:5vh; font-size:2vh;">
                    <option value="">Select Battery</option>
                    <option value="Bajaj 8.9">Bajaj 8.9</option>
                    <option value="Bajaj 5.8">Bajaj 5.8</option>
                    <option value="Bajaj 12.1">Bajaj 12.1</option>
                </select>
            </div>

            <!-- Text Field -->
            <div class="col-md-3">
                <label>6 Digit Number</label>
                <input id="batteryNumber" 
                       type="text" 
                       maxlength="6" 
                       class="form-control" 
                       style="height:5vh; font-size:2vh;" 
                       placeholder="Enter 6 digit number">
            </div>

            <!-- Dropdown 2 -->
            <div class="col-md-3">
                <label>Status</label>
                <select id="statusDropdown" class="form-control" style="height:5vh; font-size:2vh;">
                    <option value="reworked">Reworked</option>
                </select>
            </div>
        </div>

        <!-- ROW 2 -->
        <div class="row" style="margin-top:25px;">
            <div class="col-md-3">
                <button class="btn btn-success btn-block" style="height:6vh; font-size:2vh;" onclick="submitData()">
                    Submit
                </button>
            </div>
        </div>

    </div>
</div>

<script>
    // Socket connection
    const socket = io(); // make sure socket.io is included

    function submitData() {
        const batteryType = document.getElementById("batteryType").value;
        const batteryNumber = document.getElementById("batteryNumber").value;
        const status = document.getElementById("statusDropdown").value;

        // Basic validations
        if (!batteryType) return alert("Please select battery type");
        if (!/^\d{6}$/.test(batteryNumber)) return alert("Please enter a valid 6-digit number");

        // Emit to backend
        socket.emit("submit_rework_data", {
            batteryType,
            batteryNumber,
            status
        });

        alert("Data Sent to Server!");
    }
</script>
