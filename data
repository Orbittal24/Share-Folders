INSERT
CREATE TRIGGER trg_ocv_machine_data_ai
ON taco_treceability.ocv_machine_data
AFTER INSERT
AS
BEGIN
    INSERT INTO taco_treceability.ocv_machine_data_mirror
    (
        cell_qrcode,
        voltage,
        ir,
        today_date,
        updated_time,
        machine_location,
        shift,
        used_on_line,
        kvalue,
        grade,
        cell_capacity,
        cell_class
    )
    SELECT
        cell_qrcode,
        voltage,
        ir,
        today_date,
        updated_time,
        machine_location,
        shift,
        used_on_line,
        kvalue,
        grade,
        cell_capacity,
        cell_class
    FROM inserted;     -- SQL Server uses "inserted" table
END;
GO



UPDATE

CREATE TRIGGER trg_ocv_machine_data_au
ON taco_treceability.ocv_machine_data
AFTER UPDATE
AS
BEGIN
    INSERT INTO taco_treceability.ocv_machine_data_mirror
    (
        cell_qrcode,
        voltage,
        ir,
        today_date,
        updated_time,
        machine_location,
        shift,
        used_on_line,
        kvalue,
        grade,
        cell_capacity,
        cell_class
    )
    SELECT
        cell_qrcode,
        voltage,
        ir,
        today_date,
        updated_time,
        machine_location,
        shift,
        used_on_line,
        kvalue,
        grade,
        cell_capacity,
        cell_class
    FROM inserted;   -- inserted contains NEW values after update
END;
GO


