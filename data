socket.on('setGlobalIngersollData_bajaj', (ingwholeData, ingpackDAta, pck_no) => {

    console.log("ðŸŸ¢ ingwholeData:", ingwholeData);
    console.log("ðŸŸ¢ ingpackDAta:", ingpackDAta);
    console.log("ðŸŸ¢ Pack QR:", pck_no);

    let tableRows = '';
    let pendingFound = false;

    // Convert ingpackDAta â†’ map { processName: actualCount }
    let packMap = {};
    for (let j = 0; j < ingpackDAta.length; j += 2) {
        packMap[ingpackDAta[j]] = parseInt(ingpackDAta[j + 1]);
    }

    console.log("ðŸ—ºï¸ Pack Map:", packMap);

    // Loop master data
    for (let i = 0; i < ingwholeData.length; i += 2) {

        let processName = ingwholeData[i];
        let expectedCount = parseInt(ingwholeData[i + 1]);
        let actualCount = packMap[processName] || 0;

        console.log(`ðŸ” ${processName} â†’ ${actualCount}/${expectedCount}`);

        // Pending condition
        if (actualCount < expectedCount) {
            pendingFound = true;

            tableRows += `
                <tr>
                    <td>${processName}</td>
                    <td class="status">(${actualCount}/${expectedCount})</td>
                </tr>
            `;
        }
    }

    // ðŸš« INTERLOCK POPUP
    if (pendingFound) {

        let pack_no = pck_no.substr(pck_no.length - 6);

        Swal.fire({
            title: `IR Torque Pending of Pack: ${pack_no}!`,
            html: `
                <style>
                    #pendingTable {
                        width: 100%;
                        border-collapse: collapse;
                        font-size: 14px;
                    }
                    #pendingTable th, #pendingTable td {
                        padding: 6px 10px;
                        border: 1px solid #555;
                        text-align: left;
                        vertical-align: top;
                        line-height: 1.3;
                    }
                    #pendingTable th {
                        background: #e4eaf5;
                        text-align: center;
                    }
                    .status {
                        white-space: nowrap;
                        text-align: center;
                        font-weight: bold;
                    }
                </style>

                <span style="font-size:18px;font-weight:bold;">
                    Pending Process
                </span>

                <table id="pendingTable">
                    <thead>
                        <tr>
                            <th>Process Name</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${tableRows}
                    </tbody>
                </table>
            `,
            icon: 'info',
            width: 750,
            allowOutsideClick: false,
            allowEscapeKey: false,
            allowEnterKey: false,
            confirmButtonText: 'OK'
        }).then(() => {
            location.reload();
        });

    } else {
        // âœ… No pending torque â†’ allow process
        console.log("âœ… All torque processes completed successfully");
    }
});
